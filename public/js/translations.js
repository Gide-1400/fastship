// =====================================
// FastShip - نظام اللغات الست العالمية
// الملف: js/translations.js
// ✅ نسخة مُصلحة
// =====================================

const translations = {
  // ==================== العربية ====================
  ar: {
    name: "العربية",
    flag: "🇸🇦",
    dir: "rtl",
    
    // Navigation
    nav_home: "الرئيسية",
    nav_features: "المميزات",
    nav_how_it_works: "كيف تعمل",
    nav_testimonials: "الآراء",
    nav_start_now: "ابدأ الآن",
    
    // Hero
    hero_title: "ربط ذكي بين أصحاب الشحنات والموصلين",
    hero_subtitle: "منصة تسهل نقل الشحنات بسرعة وأمان مع أفضل الأسعار",
    hero_send_shipment: "أرسل شحنة",
    hero_become_carrier: "اصبح موصلاً",
    
    // Common
    welcome: "مرحباً",
    shipment: "شحنة",
    carrier: "موصل",
    shipper: "صاحب شحنة",
    login: "دخول",
    register: "تسجيل جديد",
    logout: "تسجيل خروج",
    email: "البريد الإلكتروني",
    password: "كلمة المرور",
    phone: "رقم الجوال",
    name: "الاسم الكامل",
    from: "من",
    to: "إلى",
    date: "التاريخ",
    time: "الوقت",
    price: "السعر",
    weight: "الوزن",
    status: "الحالة",
    search: "بحث",
    save: "حفظ",
    cancel: "إلغاء",
    submit: "إرسال",
    
    // Dashboard
    dashboard: "لوحة التحكم",
    active_trips: "الرحلات النشطة",
    accepted_shipments: "الشحنات المقبولة",
    total_income: "الدخل الكلي",
    rating: "التقييم",
    create_trip: "رحلة جديدة",
    my_trips: "رحلاتي",
    my_shipments: "شحناتي",
    available_shipments: "الشحنات المتاحة",
    profile: "الملف الشخصي",
    
    // Messages
    success_created: "تم الإنشاء بنجاح",
    success_updated: "تم التحديث بنجاح",
    error_occurred: "حدث خطأ",
    loading: "جاري التحميل...",
    no_data: "لا توجد بيانات"
  },

  // ==================== English ====================
  en: {
    name: "English",
    flag: "🇬🇧",
    dir: "ltr",
    
    nav_home: "Home",
    nav_features: "Features",
    nav_how_it_works: "How It Works",
    nav_testimonials: "Testimonials",
    nav_start_now: "Start Now",
    
    hero_title: "Smart Connection Between Shippers and Carriers",
    hero_subtitle: "A platform that facilitates fast and secure shipment delivery at the best prices",
    hero_send_shipment: "Send Shipment",
    hero_become_carrier: "Become a Carrier",
    
    welcome: "Welcome",
    shipment: "Shipment",
    carrier: "Carrier",
    shipper: "Shipper",
    login: "Login",
    register: "Register",
    logout: "Logout",
    email: "Email",
    password: "Password",
    phone: "Phone Number",
    name: "Full Name",
    from: "From",
    to: "To",
    date: "Date",
    time: "Time",
    price: "Price",
    weight: "Weight",
    status: "Status",
    search: "Search",
    save: "Save",
    cancel: "Cancel",
    submit: "Submit",
    
    dashboard: "Dashboard",
    active_trips: "Active Trips",
    accepted_shipments: "Accepted Shipments",
    total_income: "Total Income",
    rating: "Rating",
    create_trip: "New Trip",
    my_trips: "My Trips",
    my_shipments: "My Shipments",
    available_shipments: "Available Shipments",
    profile: "Profile",
    
    success_created: "Successfully Created",
    success_updated: "Successfully Updated",
    error_occurred: "An Error Occurred",
    loading: "Loading...",
    no_data: "No Data Available"
  },

  // ==================== 中文 (Chinese) ====================
  zh: {
    name: "中文",
    flag: "🇨🇳",
    dir: "ltr",
    
    nav_home: "首页",
    nav_features: "特点",
    nav_how_it_works: "如何工作",
    nav_testimonials: "评价",
    nav_start_now: "立即开始",
    
    hero_title: "托运人与承运人之间的智能连接",
    hero_subtitle: "一个以最优价格促进快速安全货运交付的平台",
    hero_send_shipment: "发送货物",
    hero_become_carrier: "成为承运人",
    
    welcome: "欢迎",
    shipment: "货物",
    carrier: "承运人",
    shipper: "托运人",
    login: "登录",
    register: "注册",
    logout: "登出",
    email: "电子邮件",
    password: "密码",
    phone: "电话号码",
    name: "全名",
    from: "从",
    to: "到",
    date: "日期",
    time: "时间",
    price: "价格",
    weight: "重量",
    status: "状态",
    search: "搜索",
    save: "保存",
    cancel: "取消",
    submit: "提交",
    
    dashboard: "仪表板",
    active_trips: "活跃行程",
    accepted_shipments: "已接受货物",
    total_income: "总收入",
    rating: "评分",
    create_trip: "新行程",
    my_trips: "我的行程",
    my_shipments: "我的货物",
    available_shipments: "可用货物",
    profile: "个人资料",
    
    success_created: "创建成功",
    success_updated: "更新成功",
    error_occurred: "发生错误",
    loading: "加载中...",
    no_data: "无数据"
  },

  // ==================== Español (Spanish) ====================
  es: {
    name: "Español",
    flag: "🇪🇸",
    dir: "ltr",
    
    nav_home: "Inicio",
    nav_features: "Características",
    nav_how_it_works: "Cómo Funciona",
    nav_testimonials: "Testimonios",
    nav_start_now: "Empezar Ahora",
    
    hero_title: "Conexión Inteligente Entre Remitentes y Transportistas",
    hero_subtitle: "Una plataforma que facilita la entrega rápida y segura de envíos a los mejores precios",
    hero_send_shipment: "Enviar Carga",
    hero_become_carrier: "Ser Transportista",
    
    welcome: "Bienvenido",
    shipment: "Envío",
    carrier: "Transportista",
    shipper: "Remitente",
    login: "Iniciar Sesión",
    register: "Registrarse",
    logout: "Cerrar Sesión",
    email: "Correo Electrónico",
    password: "Contraseña",
    phone: "Número de Teléfono",
    name: "Nombre Completo",
    from: "Desde",
    to: "Hasta",
    date: "Fecha",
    time: "Hora",
    price: "Precio",
    weight: "Peso",
    status: "Estado",
    search: "Buscar",
    save: "Guardar",
    cancel: "Cancelar",
    submit: "Enviar",
    
    dashboard: "Panel de Control",
    active_trips: "Viajes Activos",
    accepted_shipments: "Envíos Aceptados",
    total_income: "Ingresos Totales",
    rating: "Calificación",
    create_trip: "Nuevo Viaje",
    my_trips: "Mis Viajes",
    my_shipments: "Mis Envíos",
    available_shipments: "Envíos Disponibles",
    profile: "Perfil",
    
    success_created: "Creado Exitosamente",
    success_updated: "Actualizado Exitosamente",
    error_occurred: "Ocurrió un Error",
    loading: "Cargando...",
    no_data: "No Hay Datos"
  },

  // ==================== Русский (Russian) ====================
  ru: {
    name: "Русский",
    flag: "🇷🇺",
    dir: "ltr",
    
    nav_home: "Главная",
    nav_features: "Особенности",
    nav_how_it_works: "Как Это Работает",
    nav_testimonials: "Отзывы",
    nav_start_now: "Начать Сейчас",
    
    hero_title: "Умное Соединение Между Грузоотправителями и Перевозчиками",
    hero_subtitle: "Платформа, которая облегчает быструю и безопасную доставку грузов по лучшим ценам",
    hero_send_shipment: "Отправить Груз",
    hero_become_carrier: "Стать Перевозчиком",
    
    welcome: "Добро пожаловать",
    shipment: "Груз",
    carrier: "Перевозчик",
    shipper: "Грузоотправитель",
    login: "Войти",
    register: "Регистрация",
    logout: "Выйти",
    email: "Электронная Почта",
    password: "Пароль",
    phone: "Номер Телефона",
    name: "Полное Имя",
    from: "Откуда",
    to: "Куда",
    date: "Дата",
    time: "Время",
    price: "Цена",
    weight: "Вес",
    status: "Статус",
    search: "Поиск",
    save: "Сохранить",
    cancel: "Отмена",
    submit: "Отправить",
    
    dashboard: "Панель Управления",
    active_trips: "Активные Поездки",
    accepted_shipments: "Принятые Грузы",
    total_income: "Общий Доход",
    rating: "Рейтинг",
    create_trip: "Новая Поездка",
    my_trips: "Мои Поездки",
    my_shipments: "Мои Грузы",
    available_shipments: "Доступные Грузы",
    profile: "Профиль",
    
    success_created: "Успешно Создано",
    success_updated: "Успешно Обновлено",
    error_occurred: "Произошла Ошибка",
    loading: "Загрузка...",
    no_data: "Нет Данных"
  },

  // ==================== اردو (Urdu) ====================
  ur: {
    name: "اردو",
    flag: "🇵🇰",
    dir: "rtl",
    
    nav_home: "ہوم",
    nav_features: "خصوصیات",
    nav_how_it_works: "یہ کیسے کام کرتا ہے",
    nav_testimonials: "رائے",
    nav_start_now: "ابھی شروع کریں",
    
    hero_title: "بھیجنے والوں اور لے جانے والوں کے درمیان سمارٹ کنکشن",
    hero_subtitle: "ایک پلیٹ فارم جو بہترین قیمتوں پر تیز اور محفوظ ترسیل کی سہولت فراہم کرتا ہے",
    hero_send_shipment: "سامان بھیجیں",
    hero_become_carrier: "کیریئر بنیں",
    
    welcome: "خوش آمدید",
    shipment: "سامان",
    carrier: "کیریئر",
    shipper: "بھیجنے والا",
    login: "لاگ ان",
    register: "رجسٹر",
    logout: "لاگ آؤٹ",
    email: "ای میل",
    password: "پاس ورڈ",
    phone: "فون نمبر",
    name: "پورا نام",
    from: "سے",
    to: "تک",
    date: "تاریخ",
    time: "وقت",
    price: "قیمت",
    weight: "وزن",
    status: "حالت",
    search: "تلاش",
    save: "محفوظ کریں",
    cancel: "منسوخ",
    submit: "جمع کرائیں",
    
    dashboard: "ڈیش بورڈ",
    active_trips: "فعال سفر",
    accepted_shipments: "قبول شدہ سامان",
    total_income: "کل آمدنی",
    rating: "درجہ بندی",
    create_trip: "نیا سفر",
    my_trips: "میرے سفر",
    my_shipments: "میرا سامان",
    available_shipments: "دستیاب سامان",
    profile: "پروفائل",
    
    success_created: "کامیابی سے بنایا گیا",
    success_updated: "کامیابی سے اپ ڈیٹ کیا گیا",
    error_occurred: "ایک خرابی واقع ہوئی",
    loading: "لوڈ ہو رہا ہے...",
    no_data: "کوئی ڈیٹا نہیں"
  }
};

// =====================================
// نظام اللغات - Language System
// =====================================

class LanguageManager {
  constructor() {
    this.currentLang = this.getStoredLanguage() || 'ar';
    this.init();
  }

  init() {
    this.setLanguage(this.currentLang);
    this.updateDirection();
  }

  getStoredLanguage() {
    return localStorage.getItem('fastship_language');
  }

  saveLanguage(lang) {
    localStorage.setItem('fastship_language', lang);
  }

  setLanguage(lang) {
    if (!translations[lang]) {
      console.error(`Language ${lang} not found`);
      return;
    }

    this.currentLang = lang;
    this.saveLanguage(lang);
    this.updateDirection();
    this.translatePage();
  }

  updateDirection() {
    const dir = translations[this.currentLang].dir;
    document.documentElement.setAttribute('dir', dir);
    document.documentElement.setAttribute('lang', this.currentLang);
  }

  translatePage() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
      const key = el.getAttribute('data-i18n');
      const translation = this.t(key);
      if (translation) {
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          el.placeholder = translation;
        } else {
          el.textContent = translation;
        }
      }
    });
  }

  t(key) {
    return translations[this.currentLang][key] || key;
  }

  getCurrentLanguage() {
    return this.currentLang;
  }

  getLanguages() {
    return Object.keys(translations).map(code => ({
      code,
      name: translations[code].name,
      flag: translations[code].flag
    }));
  }
}

// =====================================
// ✅ التصدير للـ window والاستخدام العام
// =====================================

// إنشاء مثيل عام
const i18n = new LanguageManager();

// ✅ تصدير للـ window (مهم جداً!)
window.translations = translations;
window.LanguageManager = LanguageManager;
window.i18n = i18n;

// تصدير للـ ES modules (اختياري)
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { translations, LanguageManager, i18n };
}

console.log("✅ Language System loaded successfully");
console.log("📚 Available languages:", Object.keys(translations).join(', '));
